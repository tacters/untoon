if(function(e,t,o){var n,a=e.getElementsByTagName(t)[0];e.getElementById(o)||((n=e.createElement(t)).id=o,n.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk"),"undefined"!=typeof edgtfSocialLoginVars)var facebookAppId=edgtfSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v5.0"}),window.FB=FB}),function(f){"use strict";var e={};function t(){f(".edgtf-login-register-widget.edgtf-user-logged-in");var e=f(".edgtf-login-opener"),t=f(".edgtf-login-register-holder"),o=f(".edgtf-login-register-close"),n=f(".edgtf-login-register-content"),a=n.children(".edgtf-login-content-inner"),s=n.children(".edgtf-register-content-inner"),d=n.children(".edgtf-forgot-pass-content-inner");if(f(document.body).on("open_user_login_trigger",function(){t.fadeIn(300),t.addClass("opened"),a.addClass("edgtf-opened")}),e.length){var i=n.find(".edgtf-wp-login-button"),r=n.find(".edgtf-wp-register-button"),g=n.find(".edgtf-login-action-btn");n.on("click",function(e){e.stopPropagation()}),i.on("click",function(e){e.preventDefault(),d.removeClass("edgtf-opened"),s.removeClass("edgtf-opened"),a.addClass("edgtf-opened")}),r.on("click",function(e){e.preventDefault(),d.removeClass("edgtf-opened"),a.removeClass("edgtf-opened"),s.addClass("edgtf-opened")}),g.on("click",function(e){e.preventDefault(),s.removeClass("edgtf-opened"),a.removeClass("edgtf-opened"),d.addClass("edgtf-opened")}),e.on("click",function(e){e.preventDefault(),t.fadeIn(300),t.addClass("opened"),a.addClass("edgtf-opened"),s.removeClass("edgtf-opened"),d.removeClass("edgtf-opened")}),t.on("click",function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"),a.removeClass("edgtf-opened"),s.removeClass("edgtf-opened"),d.removeClass("edgtf-opened"))}),f(o).on("click",function(e){t.fadeOut(300),t.removeClass("opened"),a.removeClass("edgtf-opened"),s.removeClass("edgtf-opened"),d.removeClass("edgtf-opened")}),f(window).on("keyup",function(e){t.hasClass("opened")&&27===e.keyCode&&(t.fadeOut(300),t.removeClass("opened"),a.removeClass("edgtf-opened"),s.removeClass("edgtf-opened"),d.removeClass("edgtf-opened"))})}}function o(){f(".edgtf-login-form").on("submit",function(e){e.preventDefault();var t={action:"urbango_membership_login_user",security:f(this).find("#edgtf-login-security").val(),login_data:f(this).serialize()};return f.ajax({type:"POST",data:t,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}}),!1})}function n(){f(".edgtf-register-form").on("submit",function(e){e.preventDefault();var t={action:"urbango_membership_register_user",security:f(this).find("#edgtf-register-security").val(),register_data:f(this).serialize()};return f.ajax({type:"POST",data:t,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}}),!1})}function a(){var o=f(".edgtf-reset-pass-form");o.on("submit",function(e){e.preventDefault();var t={action:"urbango_membership_user_lost_password",user_login:o.find("#user_reset_password_login").val()};f.ajax({type:"POST",data:t,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t=JSON.parse(e);s(t),"success"===t.status&&(window.location=t.redirect)}})})}function s(e){var t=f(".edgtf-membership-response-holder"),o=_.template(f(".edgtf-membership-response-template").html())({messageClass:"success"===e.status?"edgtf-membership-message-succes":"edgtf-membership-message-error",message:e.message});t.html(o)}function d(){f(".edgtf-facebook-login-holder").on("submit",function(e){e.preventDefault(),window.FB.login(function(e){var t;"connected"===(t=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var t=f(".edgtf-facebook-login-holder [name^=edgtf_nonce_facebook_login]").val();e.nonce=t,e.image=e.picture.data.url;var o={action:"urbango_membership_check_facebook_user",response:e};f.ajax({type:"POST",data:o,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}})})):"not_authorized"===t.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function i(){if("undefined"!=typeof edgtfSocialLoginVars)var e=edgtfSocialLoginVars.social.googleClientId;e?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),f(".edgtf-google-login-holder").on("submit",function(e){e.preventDefault(),window.auth2.signIn(),function(){if(window.auth2.isSignedIn.get()){var e=window.auth2.currentUser.get(),t=e.getBasicProfile(),o=f(".edgtf-google-login-holder [name^=edgtf_nonce_google_login]").val(),n={id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl(),link:"https://plus.google.com/"+t.getId(),nonce:o},a={action:"urbango_membership_check_google_user",response:n};f.ajax({type:"POST",data:a,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}})}}()})}):f(".edgtf-google-login-holder").on("submit",function(e){e.preventDefault()})}"undefined"!=typeof edgtf&&(edgtf.modules.socialLogin=e),e.edgtfUserLogin=o,e.edgtfUserRegister=n,e.edgtfUserLostPassword=a,e.edgtfInitLoginWidgetModal=t,e.edgtfInitFacebookLogin=d,e.edgtfInitGooglePlusLogin=i,e.edgtfRenderAjaxResponseMessage=s,f(document).ready(function(){t(),o(),n(),a(),function(){var e=f(".edgtf-membership-dashboard-nav-holder");if(edgtf.body.hasClass("page-template-user-dashboard")&&e.length){var t=e.children(".edgtf-membership-dashboard-nav-opener"),o=e.children(".edgtf-membership-dashboard-nav");t.on("click",function(e){e.preventDefault(),o.is(":visible")?o.removeClass("edgtf-opened").slideUp():o.addClass("edgtf-opened").slideDown()})}}(),e=f(".edgtf-login-register-content"),edgtf.body.hasClass("page-template-user-dashboard")&&e.length&&e.tabs().css("opacity","1");var e}),f(window).load(function(){(function(){var e=f(".edgtf-login-register-widget.edgtf-user-logged-in");if(e.length){var t=e.offset().left,o=e.find(".edgtf-login-dropdown");edgtf.windowWidth-t<o.outerWidth()&&o.addClass("edgtf-right")}})(),d(),i(),function(){f(".edgtf-membership-main-wrapper");var e=f(".page-template-user-dashboard .edgtf-content"),t=f(".edgtf-page-footer"),o=0;!edgtf.body.hasClass("edgtf-header-transparent")&&1024<edgtf.windowWidth&&(o=o+edgtfGlobalVars.vars.edgtfMenuAreaHeight+edgtfGlobalVars.vars.edgtfLogoAreaHeight);0<t.length&&(o+=t.outerHeight());if(1024<edgtf.windowWidth){var n=edgtf.windowHeight-o;e.css({"min-height":n+"px"})}}()})}(jQuery),function(s){"use strict";var e={};function t(){o(),s(document.body).on("urbango_membership_favorites_trigger",function(){o()})}function o(){s(".edgtf-membership-item-favorites").on("click",function(e){e.preventDefault();var t,o,n,a=s(this);void 0!==a.data("item-id")&&(t=a.data("item-id")),o=a,n={action:"urbango_membership_add_item_to_favorites",item_id:t},s.ajax({type:"POST",data:n,url:edgtfGlobalVars.vars.edgtfAjaxUrl,success:function(e){var t=JSON.parse(e);"success"===t.status&&(o.hasClass("edgtf-icon-only")||o.find("span").text(t.data.message),o.find(".edgtf-favorites-icon").removeClass("fa-heart fa-heart-o").addClass(t.data.icon))}})})}(edgtf.modules.membershipFavorites=e).edgtfOnDocumentReady=t,s(document).ready(t)}(jQuery);